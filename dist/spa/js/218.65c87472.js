"use strict";(self["webpackChunkquasarapp"]=self["webpackChunkquasarapp"]||[]).push([[218],{1218:(e,a,l)=>{l.r(a),l.d(a,{default:()=>E});var o=l(3673),t=l(2323);const r={id:"app"},n={class:"q-pa-md"},i=(0,o.Wm)("div",{class:"text-h6"},"Nuevo tipo",-1),s={class:"flex"},d=(0,o.Wm)("label",null,"Color",-1),p=(0,o.Wm)("span",{class:"q-ml-sm"},"¿Estás seguro que quieres eliminarlo?",-1);function m(e,a,l,m,u,c){const g=(0,o.up)("q-btn"),f=(0,o.up)("q-space"),h=(0,o.up)("q-icon"),v=(0,o.up)("q-input"),w=(0,o.up)("q-td"),b=(0,o.up)("q-tr"),y=(0,o.up)("q-table"),W=(0,o.up)("q-card-section"),k=(0,o.up)("q-color"),C=(0,o.up)("q-popup-proxy"),q=(0,o.up)("q-checkbox"),I=(0,o.up)("q-card-actions"),V=(0,o.up)("q-card"),_=(0,o.up)("q-dialog"),x=(0,o.up)("q-page"),Z=(0,o.up)("q-avatar");return(0,o.wg)(),(0,o.j4)(o.HY,null,[(0,o.Wm)(x,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)("div",r,[(0,o.Wm)("div",n,[(0,o.Wm)(y,{title:"Tipos",rows:m.mealTypes,columns:m.columns,"row-key":"name",filter:m.filter,loading:m.loadingState},{top:(0,o.w5)((()=>[(0,o.Wm)(g,{color:"primary",disable:m.loadingState,label:"Añadir tipo",onClick:m.newItem},null,8,["disable","onClick"]),(0,o.Wm)(f),(0,o.Wm)(v,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:m.filter,"onUpdate:modelValue":a[1]||(a[1]=e=>m.filter=e)},{append:(0,o.w5)((()=>[(0,o.Wm)(h,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,o.w5)((e=>[(0,o.Wm)(b,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(w,{key:"order",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.order),1)])),_:2},1032,["props"]),(0,o.Wm)(w,{key:"name",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,t.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(w,{key:"general",props:e},{default:(0,o.w5)((()=>[e.row.general?((0,o.wg)(),(0,o.j4)(h,{key:0,name:"done"})):(0,o.kq)("",!0)])),_:2},1032,["props"]),(0,o.Wm)(w,{key:"color",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)("div",{style:`border-radius:50%; margin:0 auto; height:20px; width:20px; background-color:${e.row.color};`},null,4)])),_:2},1032,["props"]),(0,o.Wm)(w,{key:"actions",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{onClick:a=>m.editItem(e.row),name:"edit",class:"actionIcons"},null,8,["onClick"]),(0,o.Wm)(h,{onClick:a=>m.requestConfirmation(e.row),name:"delete",class:"actionIcons"},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","loading"])])]),(0,o.Wm)("div",null,[(0,o.Wm)(_,{modelValue:m.prompt,"onUpdate:modelValue":a[6]||(a[6]=e=>m.prompt=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(V,{style:{"min-width":"350px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[i])),_:1}),(0,o.Wm)(W,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{ref:"editedItemName",dense:"",modelValue:m.editedItem.name,"onUpdate:modelValue":a[2]||(a[2]=e=>m.editedItem.name=e),label:"Nombre",autofocus:"",rules:[e=>e.length>=1||"Por favor, introduce un nombre"]},null,8,["modelValue","rules"])])),_:1}),(0,o.Wm)(W,{class:"q-pt-none flex justify-between items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)("div",s,[d,(0,o.Wm)("div",{style:`border: 1px solid black; border-radius:50%; margin-left: 8px; height:20px; width:20px; background-color:${m.editedItem.color};`},[(0,o.Wm)(C,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,o.w5)((()=>[(0,o.Wm)(k,{modelValue:m.editedItem.color,"onUpdate:modelValue":a[3]||(a[3]=e=>m.editedItem.color=e),"default-view":"palette"},null,8,["modelValue"])])),_:1})],4)]),(0,o.Wm)("div",null,[(0,o.Wm)(q,{"left-label":"",modelValue:m.editedItem.general,"onUpdate:modelValue":a[4]||(a[4]=e=>m.editedItem.general=e),label:"¿General?",value:m.editedItem.general},null,8,["modelValue","value"])])])),_:1}),(0,o.Wm)(W,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,{dense:"",modelValue:m.editedItem.order,"onUpdate:modelValue":a[5]||(a[5]=e=>m.editedItem.order=e),label:"Orden",type:"number",rules:[e=>e<=m.newOrder()||`El orden no puede ser superior a ${m.newOrder()}, por lo que se establecerá en ${m.newOrder()}`]},null,8,["modelValue","rules"])])),_:1}),(0,o.Wm)(I,{align:"right",class:"text-primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{flat:"",label:"Cancelar",onClick:m.close},null,8,["onClick"]),(0,o.Wm)(g,{flat:"",label:"Guardar",onClick:m.save},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,o.Wm)(_,{modelValue:m.dialogConfirm,"onUpdate:modelValue":a[7]||(a[7]=e=>m.dialogConfirm=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(Z,{icon:"delete",color:"primary","text-color":"white"}),p])),_:1}),(0,o.Wm)(I,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{onClick:m.close,label:"Cancelar"},null,8,["onClick"]),(0,o.Wm)(g,{onClick:m.deleteItem,label:"Confirmar",color:"negative"},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var u=l(515),c=l.n(u),g=l(1959),f=l(5474),h=l(8825);const v=[{name:"order",align:"left",label:"Orden",field:"order",sortable:!0},{name:"name",label:"Tipo",align:"left",field:"name",sortable:!0},{name:"general",label:"General",align:"center",field:"general",sortable:!1},{name:"color",align:"center",label:"Color",field:"color",sortable:!1},{name:"actions",align:"right",label:"Actions",field:"actions",sortable:!1}],w={name:"MealTypes",setup(){const e=(0,h.Z)();let a=-1,l=(0,g.iH)([]),t=(0,g.iH)(!0),r=(0,g.iH)(""),n=(0,g.iH)(!1),i=(0,g.iH)(!1),s=(0,g.iH)(null),d=(0,g.iH)({id:"",name:"",general:!1,color:"#FFFFFF",order:""}),p={id:"",name:"",general:!1,color:"#FFFFFF",order:""};(0,o.wF)((()=>{m()}));const m=async()=>{t.value=!0,await f.api.get("https://back-food-planning.herokuapp.com/api/mealTypes").then((e=>{l.value=e.data})).catch((a=>{error.response.data.errors?Object.values(error.response.data.errors).forEach((a=>{e.notify({message:a,type:"negative",position:"top-right"})})):e.notify({message:error.response.data.message,type:"negative",position:"top-right"})})),t.value=!1},u=()=>l.value.length>0?Math.max.apply(Math,l.value.map((function(e){return e.order+1}))):1,w=()=>{n.value=!0,d.value.order=u()},b=async()=>{s.value.validate()&&(e.loading.show(),y()?await f.api.post("https://back-food-planning.herokuapp.com/api/mealTypes",d.value).then((a=>{200==a.status&&(l.value=a.data,e.notify({message:"Guardado correctamente",type:"positive",position:"top-right"}))})).catch((a=>{a.response.data.errors?Object.values(a.response.data.errors).forEach((a=>{e.notify({message:a,type:"negative",position:"top-right"})})):e.notify({message:a.response.data.message,type:"negative",position:"top-right"})})):await f.api.patch("https://back-food-planning.herokuapp.com/api/mealTypes/"+d.value.id,d.value).then((a=>{200==a.status&&(l.value=a.data,e.notify({message:"Actualizado correctamente",type:"positive",position:"top-right"}))})).catch((a=>{a.response.data.errors?Object.values(a.response.data.errors).forEach((a=>{e.notify({message:a,type:"negative",position:"top-right"})})):e.notify({message:a.response.data.message,type:"negative",position:"top-right"})})),W(),e.loading.hide())},y=()=>-1==a,W=async()=>{n.value=!1,i.value=!1,await(0,o.Y3)((()=>{d.value=Object.assign({},p),a=-1}))},k=e=>{n.value=!0,a=0,d.value=c()({},e)},C=async()=>{e.loading.show(),await f.api.delete(`https://back-food-planning.herokuapp.com/api/mealTypes/${d.value.id}`).then((e=>{200==e.status&&(l.value=e.data)})).catch((a=>{a.response.data.errors?Object.values(a.response.data.errors).forEach((a=>{e.notify({message:a,type:"negative",position:"top-right"})})):e.notify({message:a.response.data.message,type:"negative",position:"top-right"})})),W(),e.loading.hide()},q=e=>{d.value=c()({},e),i.value=!0};return{mealTypes:l,loadingState:t,columns:v,filter:r,prompt:n,editedItem:d,save:b,close:W,editItem:k,deleteItem:C,dialogConfirm:i,requestConfirmation:q,newItem:w,newOrder:u,editedItemName:s}}};var b=l(4379),y=l(4993),W=l(8240),k=l(2025),C=l(4842),q=l(4554),I=l(8186),V=l(3884),_=l(6778),x=l(151),Z=l(5589),Q=l(3944),F=l(555),T=l(5735),O=l(9367),U=l(5096),j=l(7518),H=l.n(j);w.render=m;const E=w;H()(w,"components",{QPage:b.Z,QTable:y.Z,QBtn:W.Z,QSpace:k.Z,QInput:C.Z,QIcon:q.Z,QTr:I.Z,QTd:V.Z,QDialog:_.Z,QCard:x.Z,QCardSection:Z.Z,QPopupProxy:Q.Z,QColor:F.Z,QCheckbox:T.Z,QCardActions:O.Z,QAvatar:U.Z})}}]);
"use strict";(self["webpackChunkquasarapp"]=self["webpackChunkquasarapp"]||[]).push([[128],{4128:(e,a,t)=>{t.r(a),t.d(a,{default:()=>U});var o=t(3673),l=t(2323);const r={id:"app"},n={class:"q-pa-md"},s=(0,o.Wm)("div",{class:"text-h6"},"Nuevo horario",-1),i=(0,o.Wm)("span",{class:"q-ml-sm"},"¿Estás seguro que quieres eliminarlo?",-1);function d(e,a,t,d,p,u){const m=(0,o.up)("q-btn"),c=(0,o.up)("q-space"),g=(0,o.up)("q-icon"),f=(0,o.up)("q-input"),h=(0,o.up)("q-td"),v=(0,o.up)("q-tr"),w=(0,o.up)("q-table"),b=(0,o.up)("q-card-section"),y=(0,o.up)("q-card-actions"),W=(0,o.up)("q-card"),k=(0,o.up)("q-dialog"),C=(0,o.up)("q-page"),q=(0,o.up)("q-avatar");return(0,o.wg)(),(0,o.j4)(o.HY,null,[(0,o.Wm)(C,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)("div",r,[(0,o.Wm)("div",n,[(0,o.Wm)(w,{title:"Tipos",rows:d.mealHours,columns:d.columns,"row-key":"name",filter:d.filter,loading:d.loadingState},{top:(0,o.w5)((()=>[(0,o.Wm)(m,{color:"primary",disable:d.loadingState,label:"Añadir hora",onClick:d.newItem},null,8,["disable","onClick"]),(0,o.Wm)(c),(0,o.Wm)(f,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:d.filter,"onUpdate:modelValue":a[1]||(a[1]=e=>d.filter=e)},{append:(0,o.w5)((()=>[(0,o.Wm)(g,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,o.w5)((e=>[(0,o.Wm)(v,{props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{key:"order",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.row.order),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"name",props:e},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,o.Wm)(h,{key:"actions",props:e},{default:(0,o.w5)((()=>[(0,o.Wm)(g,{onClick:a=>d.editItem(e.row),name:"edit",class:"actionIcons"},null,8,["onClick"]),(0,o.Wm)(g,{onClick:a=>d.requestConfirmation(e.row),name:"delete",class:"actionIcons"},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","loading"])])]),(0,o.Wm)("div",null,[(0,o.Wm)(k,{modelValue:d.prompt,"onUpdate:modelValue":a[4]||(a[4]=e=>d.prompt=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{style:{"min-width":"350px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(b,null,{default:(0,o.w5)((()=>[s])),_:1}),(0,o.Wm)(b,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{ref:"editedItemName",dense:"",modelValue:d.editedItem.name,"onUpdate:modelValue":a[2]||(a[2]=e=>d.editedItem.name=e),label:"Nombre",autofocus:"",rules:[e=>e.length>=1||"Por favor, introduce un nombre"]},null,8,["modelValue","rules"])])),_:1}),(0,o.Wm)(b,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(f,{dense:"",modelValue:d.editedItem.order,"onUpdate:modelValue":a[3]||(a[3]=e=>d.editedItem.order=e),label:"Orden",type:"number",rules:[e=>e<=d.newOrder()||`El orden no puede ser superior a ${d.newOrder()}, por lo que se establecerá en ${d.newOrder()}`]},null,8,["modelValue","rules"])])),_:1}),(0,o.Wm)(y,{align:"right",class:"text-primary"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{flat:"",label:"Cancelar",onClick:d.close},null,8,["onClick"]),(0,o.Wm)(m,{flat:"",label:"Guardar",onClick:d.save},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,o.Wm)(k,{modelValue:d.dialogConfirm,"onUpdate:modelValue":a[5]||(a[5]=e=>d.dialogConfirm=e),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(b,{class:"row items-center"},{default:(0,o.w5)((()=>[(0,o.Wm)(q,{icon:"delete",color:"primary","text-color":"white"}),i])),_:1}),(0,o.Wm)(y,{align:"right"},{default:(0,o.w5)((()=>[(0,o.Wm)(m,{onClick:d.close,flat:"",label:"Cancelar"},null,8,["onClick"]),(0,o.Wm)(m,{onClick:d.deleteItem,flat:"",label:"Confirmar",color:"negative"},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var p=t(515),u=t.n(p),m=t(1959),c=t(5474),g=t(8825);const f=[{name:"order",label:"Orden",align:"left",field:"order",sortable:!0},{name:"name",label:"Horario",align:"left",field:"name",sortable:!0},{name:"actions",align:"right",label:"Actions",field:"actions",sortable:!1}],h={name:"MealHours",setup(){const e=(0,g.Z)();let a=-1,t=(0,m.iH)([]),l=(0,m.iH)(!0),r=(0,m.iH)(""),n=(0,m.iH)(!1),s=(0,m.iH)(!1),i=(0,m.iH)(null),d=(0,m.iH)({id:"",name:"",order:""}),p={id:"",name:"",order:""};(0,o.wF)((()=>{h()}));const h=async()=>{l.value=!0,await c.api.get("https://food-planning-back.herokuapp.com/api/mealHours").then((e=>{t.value=e.data})).catch((a=>{error.response.data.errors?Object.values(error.response.data.errors).forEach((a=>{e.notify({message:a,type:"negative",position:"top-right"})})):e.notify({message:error.response.data.message,type:"negative",position:"top-right"})})),l.value=!1},v=()=>t.value.length>0?Math.max.apply(Math,t.value.map((function(e){return e.order})))+1:1,w=()=>{n.value=!0,d.value.order=v()},b=async()=>{i.value.validate()&&(e.loading.show(),y()?await c.api.post("https://food-planning-back.herokuapp.com/api/mealHours",d.value).then((a=>{200==a.status&&(t.value=a.data,e.notify({message:"Guardado correctamente",type:"positive",position:"top-right"}))})).catch((a=>{a.response.data.errors?Object.values(a.response.data.errors).forEach((a=>{e.notify({message:a,type:"negative",position:"top-right"})})):e.notify({message:a.response.data.message,type:"negative",position:"top-right"})})):await c.api.patch("https://food-planning-back.herokuapp.com/api/mealHours/"+d.value.id,d.value).then((a=>{200==a.status&&(t.value=a.data,e.notify({message:"Actualizado correctamente",type:"positive",position:"top-right"}))})).catch((a=>{a.response.data.errors?Object.values(a.response.data.errors).forEach((a=>{e.notify({message:a,type:"negative",position:"top-right"})})):e.notify({message:a.response.data.message,type:"negative",position:"top-right"})})),W(),e.loading.hide())},y=()=>-1==a,W=async()=>{n.value=!1,s.value=!1,await(0,o.Y3)((()=>{d.value=Object.assign({},p),a=-1}))},k=e=>{n.value=!0,a=0,d.value=u()({},e)},C=async()=>{e.loading.show(),await c.api.delete(`https://food-planning-back.herokuapp.com/api/mealHours/${d.value.id}`).then((e=>{200==e.status&&(t.value=e.data)})).catch((a=>{a.response.data.errors?Object.values(a.response.data.errors).forEach((a=>{e.notify({message:a,type:"negative",position:"top-right"})})):e.notify({message:a.response.data.message,type:"negative",position:"top-right"})})),W(),e.loading.hide()},q=e=>{d.value=u()({},e),s.value=!0};return{mealHours:t,loadingState:l,columns:f,filter:r,prompt:n,editedItem:d,save:b,close:W,editItem:k,deleteItem:C,dialogConfirm:s,requestConfirmation:q,newItem:w,newOrder:v,editedItemName:i}}};var v=t(4379),w=t(4993),b=t(8240),y=t(2025),W=t(4842),k=t(4554),C=t(8186),q=t(3884),I=t(6778),_=t(151),H=t(5589),V=t(9367),Z=t(5096),Q=t(7518),O=t.n(Q);h.render=d;const U=h;O()(h,"components",{QPage:v.Z,QTable:w.Z,QBtn:b.Z,QSpace:y.Z,QInput:W.Z,QIcon:k.Z,QTr:C.Z,QTd:q.Z,QDialog:I.Z,QCard:_.Z,QCardSection:H.Z,QCardActions:V.Z,QAvatar:Z.Z})}}]);
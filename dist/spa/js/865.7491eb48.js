"use strict";(self["webpackChunkquasarapp"]=self["webpackChunkquasarapp"]||[]).push([[865],{3865:(e,a,l)=>{l.r(a),l.d(a,{default:()=>B});var t=l(3673),o=l(2323);const n={id:"app"},i={class:"q-pa-md"},m=(0,t.Wm)("div",{class:"text-h6"},"Nueva categoría",-1),d={class:"items-center"},u=(0,t.Wm)("span",{class:"q-ml-sm"},"¿Estás seguro que quieres eliminarlo?",-1);function c(e,a,l,c,r,s){const p=(0,t.up)("q-btn"),f=(0,t.up)("q-space"),g=(0,t.up)("q-icon"),w=(0,t.up)("q-input"),W=(0,t.up)("q-td"),b=(0,t.up)("q-table"),v=(0,t.up)("q-card-section"),h=(0,t.up)("q-item-section"),C=(0,t.up)("q-item-label"),_=(0,t.up)("q-item"),q=(0,t.up)("q-select"),I=(0,t.up)("q-card-actions"),k=(0,t.up)("q-card"),Q=(0,t.up)("q-dialog"),V=(0,t.up)("q-page"),Z=(0,t.up)("q-avatar"),y=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(t.HY,null,[(0,t.Wm)(V,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)("div",n,[(0,t.Wm)("div",i,[(0,t.Wm)(b,{title:"Categorias",rows:c.categories,columns:c.columns,"row-key":"name",filter:c.filter,loading:c.loadingState},{top:(0,t.w5)((()=>[(0,t.Wm)(p,{color:"primary",disable:c.loadingState,label:"Añadir categoría",onClick:c.editItem},null,8,["disable","onClick"]),(0,t.Wm)(f),(0,t.Wm)(w,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:c.filter,"onUpdate:modelValue":a[1]||(a[1]=e=>c.filter=e)},{append:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-icon":(0,t.w5)((e=>[(0,t.Wm)(W,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"img:"+e.row.icon.path,class:"actionIcons"},null,8,["name"])])),_:2},1032,["props"])])),"body-cell-action":(0,t.w5)((e=>[(0,t.Wm)(W,{key:"action",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"edit",class:"actionIcons",onClick:a=>c.editItem(e.row,e.rowIndex)},null,8,["onClick"]),(0,t.Wm)(g,{name:"delete",class:"actionIcons",onClick:a=>c.requestConfirmation(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","loading"])])]),(0,t.Wm)("div",null,[(0,t.Wm)(Q,{modelValue:c.prompt,"onUpdate:modelValue":a[5]||(a[5]=e=>c.prompt=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{style:{"min-width":"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[m])),_:1}),(0,t.Wm)(v,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{ref:"editedItemName",dense:"",modelValue:c.editedItem.name,"onUpdate:modelValue":a[2]||(a[2]=e=>c.editedItem.name=e),label:"Nombre",autofocus:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(v,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{modelValue:c.editedItem.icon,"onUpdate:modelValue":a[3]||(a[3]=e=>c.editedItem.icon=e),options:c.icons,"option-label":"name","option-value":"id",label:"Selecciona icono"},{selected:(0,t.w5)((()=>[(0,t.Wm)("div",d,[(0,t.Wm)(g,{class:"q-mr-md",name:c.editedItem.icon?"img:"+c.editedItem.icon.path:""},null,8,["name"]),(0,t.Wm)("span",null,(0,o.zw)(c.editedItem.icon?c.editedItem.icon.name:""),1)])])),option:(0,t.w5)((e=>[(0,t.Wm)(_,e.itemProps,{default:(0,t.w5)((()=>[(0,t.Wm)(h,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{name:"img:"+e.opt.path},null,8,["name"])])),_:2},1024),(0,t.Wm)(h,null,{default:(0,t.w5)((()=>[(0,t.Wm)(C,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.opt.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options"])])),_:1}),(0,t.Wm)(v,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{dense:"",type:"number",label:"Nº optimo por semana",modelValue:c.editedItem.optimum_number,"onUpdate:modelValue":a[4]||(a[4]=e=>c.editedItem.optimum_number=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(I,{align:"right",class:"text-primary"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(p,{flat:"",label:"Cancelar"},null,512),[[y]]),(0,t.Wm)(p,{flat:"",label:"Guardar",onClick:c.save},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,t.Wm)(Q,{modelValue:c.dialogConfirm,"onUpdate:modelValue":a[6]||(a[6]=e=>c.dialogConfirm=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"row items-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(Z,{icon:"delete",color:"primary","text-color":"white"}),u])),_:1}),(0,t.Wm)(I,{align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{onClick:c.close,label:"Cancelar"},null,8,["onClick"]),(0,t.Wm)(p,{onClick:c.deleteItemDB,label:"Confirmar",color:"negative"},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var r=l(515),s=l.n(r),p=l(5474),f=l(1959);const g=[{name:"name",label:"Categoría",align:"left",field:"name",sortable:!0},{name:"icon",label:"Icono",align:"left",field:"icon",sortable:!1},{name:"optimum_number",align:"center",label:"Nº optimo por semana",field:"optimum_number",sortable:!0},{name:"action",align:"right",label:"Action",field:"action"}],w={name:"CategoriesPage",setup(){let e=-1,a=(0,f.iH)([]),l=(0,f.iH)([]),o=(0,f.iH)(!0),n=(0,f.iH)(""),i=(0,f.iH)(!1),m=(0,f.iH)(!1),d=((0,f.iH)(""),(0,f.iH)(""),(0,f.iH)({id:"",name:"",icon:"",optimum_number:"",parent_id:null})),u={id:"",name:"",icon:"",optimum_number:"",parent_id:null};(0,t.bv)((()=>{c()}));const c=async()=>{o.value=!0,await p.api.get("https://back-food-planning.herokuapp.com/api/categories").then((e=>{a.value=e.data.categories,l.value=e.data.icons})),o.value=!1},r=(a=null,l=null)=>{d.value=a?s()({},a):{defaultItem:u},e=null!==l&&void 0!==l?l:-1,i.value=!0},w=async()=>{C()?b():W()},W=async()=>{await p.api.patch("https://back-food-planning.herokuapp.com/api/categories/"+d.value.id,d.value).then((l=>{a.value[e]=l.data})).catch((e=>{console.error(e)})),_()},b=async()=>{await p.api.post("https://back-food-planning.herokuapp.com/api/categories",d.value).then((e=>{a.value.push(e.data)})).catch((e=>{console.error(e)})),_()},v=e=>{d.value=s()({},e),m.value=!0},h=async()=>{await p.api.delete("https://back-food-planning.herokuapp.com/api/categories/"+d.value.id).then((e=>{a.value=e.data})).catch((e=>{console.error(e)})),_()},C=()=>!d.value.id,_=async()=>{i.value=!1,m.value=!1,await(0,t.Y3)((()=>{d.value=s()({},u),e=-1}))};return{categories:a,icons:l,loadingState:o,columns:g,filter:n,prompt:i,editedItem:d,editItem:r,save:w,close:_,dialogConfirm:m,deleteItemDB:h,requestConfirmation:v}}};var W=l(4379),b=l(4993),v=l(8240),h=l(2025),C=l(4842),_=l(4554),q=l(3884),I=l(6778),k=l(151),Q=l(5589),V=l(3017),Z=l(3414),y=l(2035),H=l(2350),S=l(9367),U=l(5096),x=l(6115),N=l(677),A=l(7518),P=l.n(A);w.render=c;const B=w;P()(w,"components",{QPage:W.Z,QTable:b.Z,QBtn:v.Z,QSpace:h.Z,QInput:C.Z,QIcon:_.Z,QTd:q.Z,QDialog:I.Z,QCard:k.Z,QCardSection:Q.Z,QSelect:V.Z,QItem:Z.Z,QItemSection:y.Z,QItemLabel:H.Z,QCardActions:S.Z,QAvatar:U.Z,QField:x.Z}),P()(w,"directives",{ClosePopup:N.Z})}}]);
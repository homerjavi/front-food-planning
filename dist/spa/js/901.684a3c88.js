"use strict";(self["webpackChunkquasarapp"]=self["webpackChunkquasarapp"]||[]).push([[901],{4901:(e,a,l)=>{l.r(a),l.d(a,{default:()=>U});l(246);var t=l(3673);const o={id:"app"},n={class:"q-pa-md"},i=(0,t.Wm)("div",{class:"text-h6"},"Nuevo plato",-1),d=(0,t.Wm)("span",{class:"q-ml-sm"},"¿Estás seguro que quieres eliminarlo?",-1);function m(e,a,l,m,u,r){const s=(0,t.up)("q-btn"),c=(0,t.up)("q-space"),p=(0,t.up)("q-icon"),f=(0,t.up)("q-input"),g=(0,t.up)("q-td"),b=(0,t.up)("q-table"),v=(0,t.up)("q-card-section"),w=(0,t.up)("q-select"),W=(0,t.up)("q-card-actions"),k=(0,t.up)("q-card"),h=(0,t.up)("q-dialog"),C=(0,t.up)("q-page"),q=(0,t.up)("q-avatar"),y=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(t.HY,null,[(0,t.Wm)(C,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)("div",o,[(0,t.Wm)("div",n,[(0,t.Wm)(b,{title:"Platos",rows:m.meals,columns:m.columns,"row-key":"name",filter:m.filter,loading:m.loadingState,"rows-per-page-options":[0]},{top:(0,t.w5)((()=>[(0,t.Wm)(s,{color:"primary",disable:m.loadingState,label:"Añadir plato",onClick:m.editItem},null,8,["disable","onClick"]),(0,t.Wm)(c),(0,t.Wm)(f,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:m.filter,"onUpdate:modelValue":a[1]||(a[1]=e=>m.filter=e)},{append:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-action":(0,t.w5)((e=>[(0,t.Wm)(g,{key:"action",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{name:"edit",class:"actionIcons",onClick:a=>m.editItem(e.row,e.rowIndex)},null,8,["onClick"]),(0,t.Wm)(p,{name:"delete",class:"actionIcons",onClick:a=>m.requestConfirmation(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","loading"])])]),(0,t.Wm)("div",null,[(0,t.Wm)(h,{modelValue:m.prompt,"onUpdate:modelValue":a[6]||(a[6]=e=>m.prompt=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(k,{style:{"min-width":"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[i])),_:1}),(0,t.Wm)(v,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{dense:"",modelValue:m.editedItem.name,"onUpdate:modelValue":a[2]||(a[2]=e=>m.editedItem.name=e),label:"Nombre",autofocus:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(v,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{modelValue:m.editedItem.category,"onUpdate:modelValue":a[3]||(a[3]=e=>m.editedItem.category=e),options:m.categories,label:"Categoría","option-label":"name","option-value":"id"},null,8,["modelValue","options"])])),_:1}),(0,t.Wm)(v,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{dense:"",type:"textarea",label:"Descripción",modelValue:m.editedItem.description,"onUpdate:modelValue":a[4]||(a[4]=e=>m.editedItem.description=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(v,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{dense:"",type:"number",label:"Calorías",modelValue:m.editedItem.kalories,"onUpdate:modelValue":a[5]||(a[5]=e=>m.editedItem.kalories=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(W,{align:"right",class:"text-primary"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(s,{flat:"",label:"Cancelar"},null,512),[[y]]),(0,t.Wm)(s,{flat:"",label:"Guardar",onClick:m.save},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,t.Wm)(h,{modelValue:m.dialogConfirm,"onUpdate:modelValue":a[7]||(a[7]=e=>m.dialogConfirm=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(k,null,{default:(0,t.w5)((()=>[(0,t.Wm)(v,{class:"row items-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{icon:"delete",color:"primary","text-color":"white"}),d])),_:1}),(0,t.Wm)(W,{align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{onClick:m.close,label:"Cancelar"},null,8,["onClick"]),(0,t.Wm)(s,{onClick:m.deleteItemDB,label:"Confirmar",color:"negative"},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var u=l(515),r=l.n(u),s=l(5474),c=l(1959);const p=[{name:"name",label:"Platos",align:"left",field:"name",sortable:!0},{name:"category_id",align:"center",label:"Categoría",field:e=>e.category.name,sortable:!0},{name:"kalories",align:"center",label:"Calories",field:"kalories",sortable:!0},{name:"action",align:"right",label:"Action",field:"action"}],f={name:"MealsPage",setup(){let e=-1,a=(0,c.iH)([]),l=(0,c.iH)([]),o=(0,c.iH)(!0),n=(0,c.iH)(""),i=(0,c.iH)(!1),d=(0,c.iH)(!1),m=(0,c.iH)({id:"",name:"",description:"",category:{id:"",name:"",optimum_number:"",parent_id:null},difficulty:0,minutes:"",kalories:"",recipe:""}),u={id:"",name:"",description:"",category:{id:"",name:"",optimum_number:"",parent_id:null},difficulty:0,minutes:"",kalories:"",recipe:""};(0,t.bv)((()=>{f(),g()}));const f=()=>{o.value=!0,s.api.get("https://food-planning-back.herokuapp.com/api/meals").then((e=>{a.value=e.data})),o.value=!1},g=()=>{o.value=!0,s.api.get("https://food-planning-back.herokuapp.com/api/categories").then((e=>{l.value=e.data.categories})),o.value=!1},b=(a=null,l=null)=>{m.value=a?r()({},a):{defaultItem:u},e=l||-1,i.value=!0},v=async()=>{C()?W():w()},w=async()=>{await s.api.patch("https://food-planning-back.herokuapp.com/api/meals/"+m.value.id,m.value).then((l=>{a.value[e]=l.data})).catch((e=>{console.error(e)})),q()},W=async()=>{await s.api.post("https://food-planning-back.herokuapp.com/api/meals",m.value).then((e=>{a.value.push(e.data)})).catch((e=>{console.error(e)})),q()},k=e=>{m.value=r()({},e),d.value=!0},h=async()=>{await s.api.delete("https://food-planning-back.herokuapp.com/api/meals/"+m.value.id).then((e=>{a.value=e.data})).catch((e=>{console.error(e)})),q()},C=()=>!m.value.id,q=async()=>{i.value=!1,d.value=!1,await(0,t.Y3)((()=>{m.value=r()({},u),e=-1}))};return{meals:a,categories:l,loadingState:o,columns:p,filter:n,prompt:i,editedItem:m,editItem:b,save:v,close:q,dialogConfirm:d,deleteItemDB:h,requestConfirmation:k}}};var g=l(4379),b=l(4993),v=l(8240),w=l(2025),W=l(4842),k=l(4554),h=l(3884),C=l(6778),q=l(151),y=l(5589),V=l(3314),_=l(9367),I=l(5096),Q=l(677),Z=l(7518),H=l.n(Z);f.render=m;const U=f;H()(f,"components",{QPage:g.Z,QTable:b.Z,QBtn:v.Z,QSpace:w.Z,QInput:W.Z,QIcon:k.Z,QTd:h.Z,QDialog:C.Z,QCard:q.Z,QCardSection:y.Z,QSelect:V.Z,QCardActions:_.Z,QAvatar:I.Z}),H()(f,"directives",{ClosePopup:Q.Z})}}]);
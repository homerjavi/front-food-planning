"use strict";(self["webpackChunkquasarapp"]=self["webpackChunkquasarapp"]||[]).push([[252],{4252:(e,a,o)=>{o.r(a),o.d(a,{default:()=>U});var t=o(3673),l=o(2323);const r={id:"app"},n={class:"q-pa-md"},i=(0,t.Wm)("div",{class:"text-h6"},"Nuevo tipo",-1),s=(0,t.Wm)("label",null,"Color",-1),d=(0,t.Wm)("span",{class:"q-ml-sm"},"¿Estás seguro que quieres eliminarlo?",-1);function p(e,a,o,p,m,u){const c=(0,t.up)("q-btn"),g=(0,t.up)("q-space"),f=(0,t.up)("q-icon"),h=(0,t.up)("q-input"),v=(0,t.up)("q-td"),w=(0,t.up)("q-tr"),y=(0,t.up)("q-table"),b=(0,t.up)("q-card-section"),W=(0,t.up)("q-color"),k=(0,t.up)("q-popup-proxy"),C=(0,t.up)("q-card-actions"),q=(0,t.up)("q-card"),I=(0,t.up)("q-dialog"),_=(0,t.up)("q-page"),V=(0,t.up)("q-avatar");return(0,t.wg)(),(0,t.j4)(t.HY,null,[(0,t.Wm)(_,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)("div",r,[(0,t.Wm)("div",n,[(0,t.Wm)(y,{title:"Tipos",rows:p.mealTypes,columns:p.columns,"row-key":"name",filter:p.filter,loading:p.loadingState},{top:(0,t.w5)((()=>[(0,t.Wm)(c,{color:"primary",disable:p.loadingState,label:"Añadir tipo",onClick:p.newItem},null,8,["disable","onClick"]),(0,t.Wm)(g),(0,t.Wm)(h,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:p.filter,"onUpdate:modelValue":a[1]||(a[1]=e=>p.filter=e)},{append:(0,t.w5)((()=>[(0,t.Wm)(f,{name:"search"})])),_:1},8,["modelValue"])])),body:(0,t.w5)((e=>[(0,t.Wm)(w,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{key:"order",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(e.row.order),1)])),_:2},1032,["props"]),(0,t.Wm)(v,{key:"name",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,l.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,t.Wm)(v,{key:"color",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)("div",{style:`border-radius:50%; margin:0 auto; height:20px; width:20px; background-color:${e.row.color};`},null,4)])),_:2},1032,["props"]),(0,t.Wm)(v,{key:"actions",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{onClick:a=>p.editItem(e.row),name:"edit",class:"actionIcons"},null,8,["onClick"]),(0,t.Wm)(f,{onClick:a=>p.requestConfirmation(e.row),name:"delete",class:"actionIcons"},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","loading"])])]),(0,t.Wm)("div",null,[(0,t.Wm)(I,{modelValue:p.prompt,"onUpdate:modelValue":a[5]||(a[5]=e=>p.prompt=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{style:{"min-width":"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(b,null,{default:(0,t.w5)((()=>[i])),_:1}),(0,t.Wm)(b,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{ref:"editedItemName",dense:"",modelValue:p.editedItem.name,"onUpdate:modelValue":a[2]||(a[2]=e=>p.editedItem.name=e),label:"Nombre",autofocus:"",rules:[e=>e.length>=1||"Por favor, introduce un nombre"]},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(b,{class:"q-pt-none flex"},{default:(0,t.w5)((()=>[s,(0,t.Wm)("div",{style:`border: 1px solid black; border-radius:50%; margin-left: 8px; height:20px; width:20px; background-color:${p.editedItem.color};`},[(0,t.Wm)(k,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:p.editedItem.color,"onUpdate:modelValue":a[3]||(a[3]=e=>p.editedItem.color=e),"default-view":"palette"},null,8,["modelValue"])])),_:1})],4)])),_:1}),(0,t.Wm)(b,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(h,{dense:"",modelValue:p.editedItem.order,"onUpdate:modelValue":a[4]||(a[4]=e=>p.editedItem.order=e),label:"Orden",type:"number",rules:[e=>e<=p.newOrder()||`El orden no puede ser superior a ${p.newOrder()}, por lo que se establecerá en ${p.newOrder()}`]},null,8,["modelValue","rules"])])),_:1}),(0,t.Wm)(C,{align:"right",class:"text-primary"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{flat:"",label:"Cancelar",onClick:p.close},null,8,["onClick"]),(0,t.Wm)(c,{flat:"",label:"Guardar",onClick:p.save},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,t.Wm)(I,{modelValue:p.dialogConfirm,"onUpdate:modelValue":a[6]||(a[6]=e=>p.dialogConfirm=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(b,{class:"row items-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(V,{icon:"delete",color:"primary","text-color":"white"}),d])),_:1}),(0,t.Wm)(C,{align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{onClick:p.close,label:"Cancelar"},null,8,["onClick"]),(0,t.Wm)(c,{onClick:p.deleteItem,label:"Confirmar",color:"negative"},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var m=o(515),u=o.n(m),c=o(1959),g=o(5474),f=o(8825);const h=[{name:"order",align:"left",label:"Orden",field:"order",sortable:!0},{name:"name",label:"Tipo",align:"left",field:"name",sortable:!0},{name:"color",align:"center",label:"Color",field:"color",sortable:!1},{name:"actions",align:"right",label:"Actions",field:"actions",sortable:!1}],v={name:"MealTypes",setup(){const e=(0,f.Z)();let a=-1,o=(0,c.iH)([]),l=(0,c.iH)(!0),r=(0,c.iH)(""),n=(0,c.iH)(!1),i=(0,c.iH)(!1),s=(0,c.iH)(null),d=(0,c.iH)({id:"",name:"",color:"#FFFFFF",order:""}),p={id:"",name:"",color:"#FFFFFF",order:""};(0,t.wF)((()=>{m()}));const m=async()=>{l.value=!0,await g.api.get("https://food-planning-back.herokuapp.com/api/mealTypes").then((e=>{o.value=e.data})).catch((a=>{error.response.data.errors?Object.values(error.response.data.errors).forEach((a=>{e.notify({message:a,type:"negative",position:"top-right"})})):e.notify({message:error.response.data.message,type:"negative",position:"top-right"})})),l.value=!1},v=()=>o.value.length>0?Math.max.apply(Math,o.value.map((function(e){return e.order+1}))):1,w=()=>{n.value=!0,d.value.order=v()},y=async()=>{s.value.validate()&&(e.loading.show(),b()?await g.api.post("https://food-planning-back.herokuapp.com/api/mealTypes",d.value).then((a=>{200==a.status&&(o.value=a.data,e.notify({message:"Guardado correctamente",type:"positive",position:"top-right"}))})).catch((a=>{a.response.data.errors?Object.values(a.response.data.errors).forEach((a=>{e.notify({message:a,type:"negative",position:"top-right"})})):e.notify({message:a.response.data.message,type:"negative",position:"top-right"})})):await g.api.patch("https://food-planning-back.herokuapp.com/api/mealTypes/"+d.value.id,d.value).then((a=>{200==a.status&&(o.value=a.data,e.notify({message:"Actualizado correctamente",type:"positive",position:"top-right"}))})).catch((a=>{a.response.data.errors?Object.values(a.response.data.errors).forEach((a=>{e.notify({message:a,type:"negative",position:"top-right"})})):e.notify({message:a.response.data.message,type:"negative",position:"top-right"})})),W(),e.loading.hide())},b=()=>-1==a,W=async()=>{n.value=!1,i.value=!1,await(0,t.Y3)((()=>{d.value=Object.assign({},p),a=-1}))},k=e=>{n.value=!0,a=0,d.value=u()({},e)},C=async()=>{e.loading.show(),await g.api.delete(`https://food-planning-back.herokuapp.com/api/mealTypes/${d.value.id}`).then((e=>{200==e.status&&(o.value=e.data)})).catch((a=>{a.response.data.errors?Object.values(a.response.data.errors).forEach((a=>{e.notify({message:a,type:"negative",position:"top-right"})})):e.notify({message:a.response.data.message,type:"negative",position:"top-right"})})),W(),e.loading.hide()},q=e=>{d.value=u()({},e),i.value=!0};return{mealTypes:o,loadingState:l,columns:h,filter:r,prompt:n,editedItem:d,save:y,close:W,editItem:k,deleteItem:C,dialogConfirm:i,requestConfirmation:q,newItem:w,newOrder:v,editedItemName:s}}};var w=o(4379),y=o(4993),b=o(8240),W=o(2025),k=o(4842),C=o(4554),q=o(8186),I=o(3884),_=o(6778),V=o(151),Z=o(5589),Q=o(3944),x=o(555),F=o(9367),T=o(5096),O=o(7518),H=o.n(O);v.render=p;const U=v;H()(v,"components",{QPage:w.Z,QTable:y.Z,QBtn:b.Z,QSpace:W.Z,QInput:k.Z,QIcon:C.Z,QTr:q.Z,QTd:I.Z,QDialog:_.Z,QCard:V.Z,QCardSection:Z.Z,QPopupProxy:Q.Z,QColor:x.Z,QCardActions:F.Z,QAvatar:T.Z})}}]);
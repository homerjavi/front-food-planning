"use strict";(self["webpackChunkquasarapp"]=self["webpackChunkquasarapp"]||[]).push([[91],{8091:(e,a,l)=>{l.r(a),l.d(a,{default:()=>N});var t=l(3673),o=l(2323);const n={id:"app"},i={class:"q-pa-md"},m=(0,t.Wm)("div",{class:"text-h6"},"Nueva categoría",-1),u=(0,t.Wm)("span",{class:"q-ml-sm"},"¿Estás seguro que quieres eliminarlo?",-1);function c(e,a,l,c,d,r){const p=(0,t.up)("q-btn"),s=(0,t.up)("q-space"),f=(0,t.up)("q-icon"),g=(0,t.up)("q-input"),b=(0,t.up)("q-td"),w=(0,t.up)("q-table"),W=(0,t.up)("q-card-section"),v=(0,t.up)("q-item-section"),h=(0,t.up)("q-item-label"),C=(0,t.up)("q-item"),_=(0,t.up)("q-select"),k=(0,t.up)("q-card-actions"),q=(0,t.up)("q-card"),I=(0,t.up)("q-dialog"),V=(0,t.up)("q-page"),y=(0,t.up)("q-avatar"),Q=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)(t.HY,null,[(0,t.Wm)(V,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)("div",n,[(0,t.Wm)("div",i,[(0,t.Wm)(w,{title:"Categorias",rows:c.categories,columns:c.columns,"row-key":"name",filter:c.filter,loading:c.loadingState},{top:(0,t.w5)((()=>[(0,t.Wm)(p,{color:"primary",disable:c.loadingState,label:"Añadir categoría",onClick:c.editItem},null,8,["disable","onClick"]),(0,t.Wm)(s),(0,t.Wm)(g,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:c.filter,"onUpdate:modelValue":a[1]||(a[1]=e=>c.filter=e)},{append:(0,t.w5)((()=>[(0,t.Wm)(f,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-icon":(0,t.w5)((e=>[(0,t.Wm)(b,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{name:"img:"+e.row.icon.path,class:"actionIcons"},null,8,["name"])])),_:2},1032,["props"])])),"body-cell-action":(0,t.w5)((e=>[(0,t.Wm)(b,{key:"action",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{name:"edit",class:"actionIcons",onClick:a=>c.editItem(e.row,e.rowIndex)},null,8,["onClick"]),(0,t.Wm)(f,{name:"delete",class:"actionIcons",onClick:a=>c.requestConfirmation(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","loading"])])]),(0,t.Wm)("div",null,[(0,t.Wm)(I,{modelValue:c.prompt,"onUpdate:modelValue":a[5]||(a[5]=e=>c.prompt=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(q,{style:{"min-width":"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(W,null,{default:(0,t.w5)((()=>[m])),_:1}),(0,t.Wm)(W,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{dense:"",modelValue:c.editedItem.name,"onUpdate:modelValue":a[2]||(a[2]=e=>c.editedItem.name=e),label:"Nombre",autofocus:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(W,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(_,{modelValue:c.editedItem.icon,"onUpdate:modelValue":a[3]||(a[3]=e=>c.editedItem.icon=e),options:c.icons,"option-label":"name","option-value":"id",clearable:"",label:"Selecciona icono"},{option:(0,t.w5)((e=>[(0,t.Wm)(C,e.itemProps,{default:(0,t.w5)((()=>[(0,t.Wm)(v,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(f,{name:"img:"+e.opt.path},null,8,["name"])])),_:2},1024),(0,t.Wm)(v,null,{default:(0,t.w5)((()=>[(0,t.Wm)(h,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,o.zw)(e.opt.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options"])])),_:1}),(0,t.Wm)(W,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{dense:"",type:"number",label:"Nº optimo por semana",modelValue:c.editedItem.optimum_number,"onUpdate:modelValue":a[4]||(a[4]=e=>c.editedItem.optimum_number=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(k,{align:"right",class:"text-primary"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(p,{flat:"",label:"Cancelar"},null,512),[[Q]]),(0,t.Wm)(p,{flat:"",label:"Guardar",onClick:c.save},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])])),_:1}),(0,t.Wm)(I,{modelValue:c.dialogConfirm,"onUpdate:modelValue":a[6]||(a[6]=e=>c.dialogConfirm=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(q,null,{default:(0,t.w5)((()=>[(0,t.Wm)(W,{class:"row items-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(y,{icon:"delete",color:"primary","text-color":"white"}),u])),_:1}),(0,t.Wm)(k,{align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{onClick:c.close,label:"Cancelar"},null,8,["onClick"]),(0,t.Wm)(p,{onClick:c.deleteItemDB,label:"Confirmar",color:"negative"},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var d=l(515),r=l.n(d),p=l(5474),s=l(1959);const f=[{name:"name",label:"Categoría",align:"left",field:"name",sortable:!0},{name:"icon",label:"Icono",align:"left",field:"icon",sortable:!1},{name:"optimum_number",align:"center",label:"Nº optimo por semana",field:"optimum_number",sortable:!0},{name:"action",align:"right",label:"Action",field:"action"}],g={name:"CategoriesPage",setup(){let e=-1,a=(0,s.iH)([]),l=(0,s.iH)([]),o=(0,s.iH)(!0),n=(0,s.iH)(""),i=(0,s.iH)(!1),m=(0,s.iH)(!1),u=(0,s.iH)({id:"",name:"",icon:"",optimum_number:"",parent_id:null}),c={id:"",name:"",icon:"",optimum_number:"",parent_id:null};(0,t.bv)((()=>{d()}));const d=async()=>{o.value=!0,await p.api.get("https://food-planning-back.herokuapp.com/api/categories").then((e=>{a.value=e.data.categories,l.value=e.data.icons})),o.value=!1},g=(a=null,l=null)=>{u.value=a?r()({},a):{defaultItem:c},e=l||-1,i.value=!0},b=async()=>{C()?W():w()},w=async()=>{await p.api.patch("https://food-planning-back.herokuapp.com/api/categories/"+u.value.id,u.value).then((l=>{a.value[e]=l.data})).catch((e=>{console.error(e)})),_()},W=async()=>{await p.api.post("https://food-planning-back.herokuapp.com/api/categories",u.value).then((e=>{a.value.push(e.data)})).catch((e=>{console.error(e)})),_()},v=e=>{u.value=r()({},e),m.value=!0},h=async()=>{await p.api.delete("https://food-planning-back.herokuapp.com/api/categories/"+u.value.id).then((e=>{a.value=e.data})).catch((e=>{console.error(e)})),_()},C=()=>!u.value.id,_=async()=>{i.value=!1,m.value=!1,await(0,t.Y3)((()=>{u.value=r()({},c),e=-1}))};return{categories:a,icons:l,loadingState:o,columns:f,filter:n,prompt:i,editedItem:u,editItem:g,save:b,close:_,dialogConfirm:m,deleteItemDB:h,requestConfirmation:v}}};var b=l(4379),w=l(4993),W=l(8240),v=l(2025),h=l(4842),C=l(4554),_=l(3884),k=l(6778),q=l(151),I=l(5589),V=l(3314),y=l(3414),Q=l(2035),Z=l(2350),H=l(9367),S=l(5096),U=l(677),x=l(7518),A=l.n(x);g.render=c;const N=g;A()(g,"components",{QPage:b.Z,QTable:w.Z,QBtn:W.Z,QSpace:v.Z,QInput:h.Z,QIcon:C.Z,QTd:_.Z,QDialog:k.Z,QCard:q.Z,QCardSection:I.Z,QSelect:V.Z,QItem:y.Z,QItemSection:Q.Z,QItemLabel:Z.Z,QCardActions:H.Z,QAvatar:S.Z}),A()(g,"directives",{ClosePopup:U.Z})}}]);
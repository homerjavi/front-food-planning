"use strict";(self["webpackChunkquasarapp"]=self["webpackChunkquasarapp"]||[]).push([[644],{7644:(e,a,l)=>{l.r(a),l.d(a,{default:()=>E});var t=l(3673);const o={id:"app"},n={class:"q-pa-md"},i=(0,t.Wm)("span",{class:"q-ml-sm"},"¿Estás seguro que quieres eliminarlo?",-1);function d(e,a,l,d,m,s){const u=(0,t.up)("q-btn"),r=(0,t.up)("q-space"),c=(0,t.up)("q-icon"),p=(0,t.up)("q-input"),f=(0,t.up)("q-td"),g=(0,t.up)("q-table"),w=(0,t.up)("new-meal-prompt"),b=(0,t.up)("q-dialog"),W=(0,t.up)("q-page"),v=(0,t.up)("q-avatar"),I=(0,t.up)("q-card-section"),q=(0,t.up)("q-card-actions"),_=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(t.HY,null,[(0,t.Wm)(W,{padding:""},{default:(0,t.w5)((()=>[(0,t.Wm)("div",o,[(0,t.Wm)("div",n,[(0,t.Wm)(g,{id:"mealsTable",ref:"mealsTable",title:"Platos",rows:d.meals,columns:d.columns,"row-key":"id",filter:d.filter,loading:d.loadingState,"rows-per-page-options":[0],"no-data-label":"Sin datos","sort-method":d.customOrder,"binary-state-sort":""},{top:(0,t.w5)((()=>[(0,t.Wm)(u,{color:"primary",disable:d.loadingState,label:"Añadir plato",onClick:d.editItem},null,8,["disable","onClick"]),(0,t.Wm)(r),(0,t.Wm)(p,{borderless:"",dense:"",debounce:"300",color:"primary",modelValue:d.filter,"onUpdate:modelValue":a[1]||(a[1]=e=>d.filter=e)},{append:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"search"})])),_:1},8,["modelValue"])])),"body-cell-action":(0,t.w5)((e=>[(0,t.Wm)(f,{key:"action",props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(c,{name:"edit",class:"actionIcons",onClick:a=>d.editItem(e.row,e.rowIndex)},null,8,["onClick"]),(0,t.Wm)(c,{name:"delete",class:"actionIcons",onClick:a=>d.requestConfirmation(e.row)},null,8,["onClick"])])),_:2},1032,["props"])])),_:1},8,["rows","columns","filter","loading","sort-method"])])]),(0,t.Wm)("div",null,[(0,t.Wm)(b,{modelValue:d.prompt,"onUpdate:modelValue":a[2]||(a[2]=e=>d.prompt=e)},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{edited_item:d.editedItem,categories:d.categories,onUpdatedItem:d.onUpdatedItem,onAddedItem:d.onAddedItem},null,8,["edited_item","categories","onUpdatedItem","onAddedItem"])])),_:1},8,["modelValue"])])])),_:1}),(0,t.Wm)(b,{modelValue:d.dialogConfirm,"onUpdate:modelValue":a[3]||(a[3]=e=>d.dialogConfirm=e),persistent:""},{default:(0,t.w5)((()=>[(0,t.Wm)(_,null,{default:(0,t.w5)((()=>[(0,t.Wm)(I,{class:"row items-center"},{default:(0,t.w5)((()=>[(0,t.Wm)(v,{icon:"delete",color:"primary","text-color":"white"}),i])),_:1}),(0,t.Wm)(q,{align:"right"},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{onClick:d.close,label:"Cancelar"},null,8,["onClick"]),(0,t.Wm)(u,{onClick:d.deleteItemDB,label:"Confirmar",color:"negative"},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}var m=l(515),s=l.n(m),u=(l(9544),l(5474)),r=l(1959),c=(l(246),l(2323));const p={class:"text-h6"},f={class:"row justify-between"},g=(0,t.Wm)("span",{class:"q-field__label q-pt-none",style:{"font-size":"14px"}},"Dificultad",-1),w={class:"flex"};function b(e,a,l,o,n,i){const d=(0,t.up)("q-card-section"),m=(0,t.up)("q-input"),s=(0,t.up)("q-icon"),u=(0,t.up)("q-item-section"),r=(0,t.up)("q-item-label"),b=(0,t.up)("q-item"),W=(0,t.up)("q-select"),v=(0,t.up)("q-rating"),I=(0,t.up)("q-btn"),q=(0,t.up)("q-card-actions"),_=(0,t.up)("q-card"),y=(0,t.Q2)("close-popup");return(0,t.wg)(),(0,t.j4)("div",null,[(0,t.Wm)(_,{style:{"min-width":"350px"}},{default:(0,t.w5)((()=>[(0,t.Wm)(d,null,{default:(0,t.w5)((()=>[(0,t.Wm)("div",p,(0,c.zw)(o.editedOrNewMealText),1)])),_:1}),(0,t.Wm)(d,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{dense:"",modelValue:o.editedItem.name,"onUpdate:modelValue":a[1]||(a[1]=e=>o.editedItem.name=e),label:"Nombre",autofocus:""},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(W,{modelValue:o.editedItem.category,"onUpdate:modelValue":a[2]||(a[2]=e=>o.editedItem.category=e),options:l.categories,label:"Categoría","option-label":"name","option-value":"id"},{option:(0,t.w5)((e=>[(0,t.Wm)(b,e.itemProps,{default:(0,t.w5)((()=>[(0,t.Wm)(u,{avatar:""},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{name:e.opt.icon.path?"img:"+e.opt.icon.path:""},null,8,["name"])])),_:2},1024),(0,t.Wm)(u,null,{default:(0,t.w5)((()=>[(0,t.Wm)(r,null,{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.opt.name),1)])),_:2},1024)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options"])])),_:1}),(0,t.Wm)(d,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{dense:"",type:"text",label:"Receta",modelValue:o.editedItem.recipe,"onUpdate:modelValue":a[3]||(a[3]=e=>o.editedItem.recipe=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{class:"q-pa-none"},{default:(0,t.w5)((()=>[(0,t.Wm)("div",f,[(0,t.Wm)(d,{class:"col-12 col-sm-6 q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"",dense:"",type:"number",label:"Calorías",modelValue:o.editedItem.kalories,"onUpdate:modelValue":a[4]||(a[4]=e=>o.editedItem.kalories=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(d,{class:"col-12 col-sm-6 q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{class:"",dense:"",type:"number",label:"Tiempo (minutos)",modelValue:o.editedItem.minutes,"onUpdate:modelValue":a[5]||(a[5]=e=>o.editedItem.minutes=e)},null,8,["modelValue"])])),_:1})])])),_:1}),(0,t.Wm)(d,{class:"q-pt-sm"},{default:(0,t.w5)((()=>[g,(0,t.Wm)("div",w,[(0,t.Wm)(v,{modelValue:o.editedItem.difficulty,"onUpdate:modelValue":a[6]||(a[6]=e=>o.editedItem.difficulty=e),size:"2em",icon:"star_border",color:"blue","icon-selected":"star","icon-half":"star_half"},null,8,["modelValue"])])])),_:1}),(0,t.Wm)(d,{class:"q-pt-none"},{default:(0,t.w5)((()=>[(0,t.Wm)(m,{dense:"",autogrow:"",label:"Descripción",modelValue:o.editedItem.description,"onUpdate:modelValue":a[7]||(a[7]=e=>o.editedItem.description=e)},null,8,["modelValue"])])),_:1}),(0,t.Wm)(q,{align:"right",class:"text-primary"},{default:(0,t.w5)((()=>[(0,t.wy)((0,t.Wm)(I,{flat:"",label:"Cancelar"},null,512),[[y]]),(0,t.Wm)(I,{flat:"",label:"Guardar",onClick:o.save},null,8,["onClick"])])),_:1})])),_:1})])}const W={name:"NewMealPrompt",props:["edited_item","categories"],setup(e,{emit:a}){let l=(0,r.iH)({id:"",name:"",description:"",category:{id:"",name:"",optimum_number:"",parent_id:null},difficulty:0,minutes:"",kalories:"",recipe:""});(0,t.bv)((()=>{l.value=e.edited_item}));const o=(0,t.Fl)((()=>l.value.id?"Editar plato":"Nuevo plato")),n=()=>!l.value.id,i=()=>{n()?m():d()},d=async()=>{await u.api.patch("https://back-food-planning.herokuapp.com/api/meals/"+l.value.id,l.value).then((e=>{a("updatedItem",e.data)})).catch((e=>{console.error(e)}))},m=async()=>{await u.api.post("https://back-food-planning.herokuapp.com/api/meals",l.value).then((e=>{a("addedItem",e.data)})).catch((e=>{console.error(e)}))};return{save:i,editedItem:l,editedOrNewMealText:o}}};var v=l(151),I=l(5589),q=l(4842),y=l(3017),h=l(3414),k=l(2035),C=l(4554),V=l(2350),Q=l(6115),Z=l(8833),U=l(9367),x=l(8240),H=l(677),A=l(7518),S=l.n(A);W.render=b;const B=W;S()(W,"components",{QCard:v.Z,QCardSection:I.Z,QInput:q.Z,QSelect:y.Z,QItem:h.Z,QItemSection:k.Z,QIcon:C.Z,QItemLabel:V.Z,QField:Q.Z,QRating:Z.Z,QCardActions:U.Z,QBtn:x.Z}),S()(W,"directives",{ClosePopup:H.Z});const P=[{name:"name",id:"id",label:"Platos",align:"left",field:"name",sortable:!0},{name:"category",align:"center",label:"Categoría",field:e=>e.category.name,sortable:!0},{name:"kalories",align:"center",label:"Calories",field:"kalories",sortable:!0},{name:"action",align:"right",label:"Action",field:"action"}],T={name:"MealsPage",components:{NewMealPrompt:B},setup(){(0,t.f3)("emitter");let e=-1,a=(0,r.iH)([]),l=(0,r.iH)([]),o=(0,r.iH)(!0),n=(0,r.iH)(""),i=(0,r.iH)(!1),d=(0,r.iH)(!1),m=(0,r.iH)(null),c={sortBy:"name",descending:!1},p=(0,r.iH)({id:"",name:"",description:"",category:{id:"",name:"",optimum_number:"",parent_id:null},difficulty:0,minutes:"",kalories:"",recipe:""}),f={id:"",name:"",description:"",category:{id:"",name:"",optimum_number:"",parent_id:null},difficulty:0,minutes:"",kalories:"",recipe:""};(0,t.bv)((()=>{g(),w(),console.log(m.value)}));const g=()=>{o.value=!0,u.api.get("https://back-food-planning.herokuapp.com/api/meals").then((e=>{a.value=e.data})).finally((()=>o.value=!1))},w=()=>{o.value=!0,u.api.get("https://back-food-planning.herokuapp.com/api/categories").then((e=>{l.value=e.data.categories})).finally((()=>o.value=!1))},b=(a=null,l=null)=>{p.value=a?s()({},a):s()({},f),e=null!==l&&void 0!==l?l:-1,i.value=!0},W=e=>{let l=a.value.findIndex((a=>a.id==e.id));a.value[l]=s()({},e),y()},v=e=>{a.value.push(e),h(),y()},I=e=>{p.value=s()({},e),d.value=!0},q=async()=>{await u.api.delete("https://back-food-planning.herokuapp.com/api/meals/"+p.value.id).then((e=>{a.value=e.data})).catch((e=>{console.error(e)})),y()},y=async()=>{i.value=!1,d.value=!1,await(0,t.Y3)((()=>{p.value=s()({},f),e=-1}))},h=(e=a.value,l=c.sortBy,t=c.descending)=>{c={sortBy:l,descending:t};let o=t?"desc":"asc";return"category"==l?(l=["category['name']","name"],o=[o,"asc"]):(l=[l],o=[o]),e=_.orderBy(e,l,o),e};return{meals:a,categories:l,loadingState:o,columns:P,filter:n,prompt:i,editedItem:p,editItem:b,close:y,dialogConfirm:d,deleteItemDB:q,requestConfirmation:I,onAddedItem:v,onUpdatedItem:W,mealsTable:m,customOrder:h}}};var N=l(4379),D=l(4993),M=l(2025),z=l(3884),O=l(6778),j=l(5096);T.render=d;const E=T;S()(T,"components",{QPage:N.Z,QTable:D.Z,QBtn:x.Z,QSpace:M.Z,QInput:q.Z,QIcon:C.Z,QTd:z.Z,QDialog:O.Z,QCard:v.Z,QCardSection:I.Z,QAvatar:j.Z,QCardActions:U.Z})}}]);